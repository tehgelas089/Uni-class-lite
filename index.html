<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Unfocus web</title>
  </head>
  <body>
    <h1>Website ini dibuat hanya untuk pembelajaran</h1>
    <h2>BY: Gfors</h2>
  </body>
  <script>
    let unfocus = localStorage.getItem("unfocus")
      ? parseInt(localStorage.getItem("unfocus"))
      : 0; // untuk menyimpan data unfokus ke local storage yang berfungsi untuk membuat nilai tetap utuh walaupun website di refresh

    document.addEventListener("visibilitychange", function () {
      if (document.visibilityState === "hidden") {
        unfocus++;
        localStorage.setItem("unfocus", unfocus);
        console.log(unfocus);
      }
    }); // berfungsi untuk menambahkan nilai pada vatiable unfocus dan juga menjadi system utama fitur unfokus
    window.addEventListener("beforeunload", function (event) {
      if (unfocus > 0) {
        unfocus--;
      }
      console.log(unfocus);
      localStorage.setItem("unfocus", unfocus);
    }); // berfungsi jika user merefresh website tidak akan membuat nilai unfokus bertambah karna sifat bawaan addEventListener("visibilitychange") adalah mendeteksi semua hal yang membuat user tidak fokus termasuk refresh website

    let h2 = document.createElement("h2");
    h2.innerHTML = "unfocus: " + unfocus;
    let body = document.body;
    body.append(h2); // untuk menampilkan data ke halaman,tapi nilai unfokus dapat dilihat selain sengaja menampilkannya ke halaman yaitu dengan cara menulis unfokus di console yang mana nama unfokus adalah nama vatiable yang menyimpan nilai dari unfokus
  </script>
</html>
